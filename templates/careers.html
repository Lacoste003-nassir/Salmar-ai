<!DOCTYPE html>
<html lang="en" data-theme="neon">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>Salmar Careers ‚Äî Build the Future</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'ui-sans-serif', 'system-ui', 'sans-serif'],
            display: ['Space Grotesk', 'Inter', 'ui-sans-serif', 'system-ui', 'sans-serif'],
          }
        }
      }
    }
  </script>

  <!-- Swiper -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css"/>

  <!-- Tippy (tooltips, optional) -->
  <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/themes/light.css"/>

  <style>
    :root {
      /* Neon mode (default) */
      --bg: #0b0516;
      --bg-2: #120a24;
      --text: #e9e6ff;
      --muted: #bfb9e8;
      --primary: #6a00f4;
      --primary-2: #9d4edd;
      --accent: #4dd0e1;
      --magenta: #b5179e;
      --card: rgba(255, 255, 255, 0.06);
      --card-strong: rgba(255, 255, 255, 0.12);
      --glass: rgba(255, 255, 255, 0.08);
      --shadow-neon: 0 0 24px rgba(157, 78, 221, 0.35), 0 0 48px rgba(106, 0, 244, 0.25);
      --shadow-soft: 0 10px 30px rgba(0, 0, 0, 0.35);
      --border: rgba(255,255,255,0.15);
      --focus: #b388ff;
    }
    html[data-theme="light"] {
      --bg: #f8f9ff;
      --bg-2: #ffffff;
      --text: #0f1226;
      --muted: #4b5563;
      --primary: #6a00f4;
      --primary-2: #3a0ca3;
      --accent: #0ea5e9;
      --magenta: #a61e4d;
      --card: rgba(18, 13, 38, 0.04);
      --card-strong: rgba(18, 13, 38, 0.08);
      --glass: rgba(18, 13, 38, 0.06);
      --shadow-neon: 0 6px 20px rgba(106, 0, 244, 0.18);
      --shadow-soft: 0 10px 24px rgba(16, 24, 40, 0.12);
      --border: rgba(16, 24, 40, 0.12);
      --focus: #7c3aed;
    }

    /* Base */
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: radial-gradient(1200px 800px at 20% 10%, var(--bg-2), var(--bg)) fixed;
      color: var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', sans-serif;
      line-height: 1.6;
      overflow-x: hidden;
    }
    .container-outer { max-width: 1200px; margin-left: auto; margin-right: auto; }
    .section { padding-top: 5rem; padding-bottom: 5rem; }
    .headline { font-family: 'Space Grotesk', Inter, system-ui, sans-serif; letter-spacing: 0.2px; }

    /* Glass/Neumorphic Cards */
    .glass {
      background: var(--glass);
      border: 1px solid var(--border);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: var(--shadow-soft);
    }
    .neo {
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      border: 1px solid var(--border);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.06), 0 10px 25px rgba(0,0,0,0.25);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }

    /* Buttons */
    .btn-primary {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      background: linear-gradient(135deg, var(--primary), var(--primary-2));
      color: white;
      padding: 0.9rem 1.25rem;
      border-radius: 999px;
      box-shadow: var(--shadow-neon);
      border: 1px solid rgba(255,255,255,0.15);
      overflow: hidden;
      transition: transform .2s ease, box-shadow .2s ease;
      isolation: isolate;
    }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 0 22px rgba(157,78,221,.45), 0 0 44px rgba(106,0,244,.35); }
    .btn-primary:focus-visible { outline: 2px solid var(--focus); outline-offset: 3px; }
    .btn-ghost {
      display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem;
      color: var(--text);
      background: transparent;
      border: 1px solid var(--border);
      padding: 0.75rem 1rem;
      border-radius: 999px;
      transition: background .2s ease, transform .2s ease;
    }
    .btn-ghost:hover { background: var(--card); transform: translateY(-1px); }
    .btn-ghost:focus-visible { outline: 2px solid var(--focus); outline-offset: 3px; }

    /* Ripple for buttons */
    .ripple {
      position: absolute; border-radius: 50%; transform: scale(0);
      animation: ripple 600ms linear; background: rgba(255,255,255,0.5);
      pointer-events: none; inset: 0; width: 200px; height: 200px;
    }
    @keyframes ripple { to { transform: scale(4); opacity: 0; } }

    /* Section headers */
    .section-title {
      font-family: 'Space Grotesk', Inter, sans-serif;
      font-weight: 800; letter-spacing: 0.3px;
      background: linear-gradient(90deg, var(--text), var(--accent));
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }

    /* Particle hover aura */
    .card-aura::before {
      content: "";
      position: absolute; inset: -2px;
      border-radius: inherit;
      background: radial-gradient(120px 120px at var(--mx, 50%) var(--my, 50%), rgba(157, 78, 221, 0.35), rgba(106, 0, 244, 0.0));
      opacity: 0; transition: opacity .25s ease;
      pointer-events: none; z-index: 0;
    }
    .card-aura:hover::before { opacity: 1; }

    /* Modal */
    .modal-backdrop {
      position: fixed; inset: 0; background: rgba(0,0,0,0.6); display: none; align-items: center; justify-content: center; padding: 1rem;
      z-index: 60; backdrop-filter: blur(3px);
    }
    .modal-backdrop[data-open="true"] { display: flex; }
    .modal {
      background: var(--bg-2); color: var(--text); border: 1px solid var(--border); border-radius: 1rem; width: 100%; max-width: 48rem;
      box-shadow: var(--shadow-soft), var(--shadow-neon);
    }

    /* Timeline */
    .timeline { position: relative; }
    .timeline::before {
      content: ""; position: absolute; top: 0; left: 1rem; bottom: 0; width: 4px; border-radius: 999px;
      background: linear-gradient(var(--accent), var(--primary-2));
      opacity: 0.25;
    }

    /* Skip link */
    .skip-link {
      position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden;
    }
    .skip-link:focus {
      position: fixed; left: 1rem; top: 1rem; width: auto; height: auto; padding: .5rem .75rem; background: var(--bg-2); color: var(--text); border: 1px solid var(--border); border-radius: .5rem; z-index: 70;
    }

    /* Career Map fallback */
    .tag {
      display: inline-flex; align-items: center; gap: .45rem; padding: .35rem .6rem; border-radius: 999px; border: 1px solid var(--border);
      background: var(--card); margin: .25rem; font-size: .9rem;
    }

    /* Focus ring utility */
    .focus-ring:focus-visible { outline: 2px solid var(--focus); outline-offset: 3px; }

    /* Small animated star twinkles layer (CSS only) */
    .twinkle {
      position: absolute; inset: 0; pointer-events: none; background:
        radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.5), transparent 60%),
        radial-gradient(1.5px 1.5px at 60% 70%, rgba(255,255,255,0.35), transparent 60%),
        radial-gradient(1.5px 1.5px at 80% 20%, rgba(255,255,255,0.35), transparent 60%),
        radial-gradient(1.5px 1.5px at 30% 80%, rgba(157,78,221,0.45), transparent 60%);
      opacity: .2; animation: twinkle 8s ease-in-out infinite alternate;
    }
    @keyframes twinkle {
      from { opacity: .15; filter: blur(0px); }
      to { opacity: .35; filter: blur(0.5px); }
    }

    /* Responsive helpers */
    @media (max-width: 640px) {
      .hero-title { font-size: 2rem; }
    }
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <!-- Header / Navigation -->
  <header class="relative z-40">
    <div class="container-outer px-4 py-5 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div aria-hidden="true" class="h-9 w-9 rounded-lg neo flex items-center justify-center">
          <span class="sr-only">Salmar Logo</span>
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <defs>
              <linearGradient id="g1" x1="0" y1="0" x2="24" y2="24">
                <stop offset="0%" stop-color="var(--accent)"/>
                <stop offset="100%" stop-color="var(--primary)"/>
              </linearGradient>
            </defs>
            <path d="M12 3l7.5 4.33v9.34L12 21l-7.5-4.33V6.67L12 3z" stroke="url(#g1)" stroke-width="1.5" fill="none"/>
            <circle cx="12" cy="12" r="2.5" fill="url(#g1)"/>
          </svg>
        </div>
        <div class="flex flex-col leading-tight">
          <span class="font-display text-xl font-extrabold tracking-wide" aria-label="Salmar">Salmar</span>
          <span class="text-xs text-[color:var(--muted)]">Careers</span>
        </div>
      </div>

      <nav aria-label="Primary" class="hidden md:flex items-center gap-3">
        <a class="btn-ghost focus-ring" href="#culture">Why Salmar</a>
        <a class="btn-ghost focus-ring" href="#roles">Open Roles</a>
        <a class="btn-ghost focus-ring" href="#life">Life at Salmar</a>
        <a class="btn-ghost focus-ring" href="#process">Process</a>
        <a class="btn-ghost focus-ring" href="#map">Career Map</a>
      </nav>

      <div class="flex items-center gap-2">
        <button id="modeToggle" class="btn-ghost focus-ring" aria-pressed="false" aria-label="Toggle theme">
          <span aria-hidden="true">üåô</span>
          <span class="hidden sm:inline">Neon</span>
        </button>
        <a href="#roles" class="btn-primary focus-ring">
          View Open Roles
        </a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <main id="main" tabindex="-1">
    <section id="hero" class="relative section overflow-hidden">
      <!-- Three.js Galaxy Canvas -->
      <canvas id="galaxy" aria-hidden="true" class="absolute inset-0 w-full h-full"></canvas>
      <div class="twinkle"></div>

      <div class="container-outer relative z-10 px-4">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-center">
          <div class="flex flex-col gap-6">
            <h1 class="hero-title headline text-5xl md:text-6xl font-extrabold leading-[1.1]">
              Build the Future with Salmar
            </h1>
            <p class="text-lg md:text-xl text-[color:var(--muted)] max-w-2xl">
              We‚Äôre not just building an AI ‚Äî we‚Äôre shaping the next digital universe. Join us.
            </p>
            <div class="flex flex-wrap gap-3">
              <a href="#roles" class="btn-primary ripple-host" data-ripple>
                View Open Roles
              </a>
              <button id="openMatch" class="btn-ghost focus-ring">
                Find My Match
              </button>
            </div>
            <div class="flex items-center gap-4 pt-2 text-sm text-[color:var(--muted)]">
              <span class="inline-flex items-center gap-2"><span aria-hidden="true">‚ö°</span>Fast-growth AI frontier</span>
              <span aria-hidden="true" class="hidden sm:inline">‚Ä¢</span>
              <span class="inline-flex items-center gap-2"><span aria-hidden="true">üîí</span>Security-first</span>
            </div>
          </div>

          <!-- Holographic Orb -->
          <div class="relative h-80 md:h-96 lg:h-[32rem]">
            <canvas id="orb" aria-hidden="true" class="absolute inset-0 w-full h-full"></canvas>
            <div class="absolute -bottom-2 left-1/2 -translate-x-1/2 text-center text-xs text-[color:var(--muted)]">
              Orb reacts to scroll & cursor
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- WHY WORK AT SALMAR -->
    <section id="culture" class="section">
      <div class="container-outer px-4">
        <div class="max-w-3xl">
          <h2 class="section-title text-3xl md:text-4xl">Why Work at Salmar</h2>
          <p class="mt-3 text-[color:var(--muted)]">A culture built for futurists, makers, and explorers.</p>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-10">
          <!-- Card template repeated -->
          <article class="relative glass rounded-xl p-6 card-aura">
            <div class="relative z-10 flex items-center gap-3">
              <div class="h-10 w-10 rounded-lg neo flex items-center justify-center text-xl">üåç</div>
              <h3 class="font-display font-semibold text-xl">Global Impact</h3>
            </div>
            <p class="relative z-10 mt-3 text-[color:var(--muted)]">Your work helps shape the AI that does everything.</p>
          </article>

          <article class="relative glass rounded-xl p-6 card-aura">
            <div class="relative z-10 flex items-center gap-3">
              <div class="h-10 w-10 rounded-lg neo flex items-center justify-center text-xl">üîí</div>
              <h3 class="font-display font-semibold text-xl">Security-First</h3>
            </div>
            <p class="relative z-10 mt-3 text-[color:var(--muted)]">We innovate with trust, privacy, and safety at our core.</p>
          </article>

          <article class="relative glass rounded-xl p-6 card-aura">
            <div class="relative z-10 flex items-center gap-3">
              <div class="h-10 w-10 rounded-lg neo flex items-center justify-center text-xl">üöÄ</div>
              <h3 class="font-display font-semibold text-xl">Rapid Growth</h3>
            </div>
            <p class="relative z-10 mt-3 text-[color:var(--muted)]">Be part of a fast-evolving AI frontier.</p>
          </article>

          <article class="relative glass rounded-xl p-6 card-aura">
            <div class="relative z-10 flex items-center gap-3">
              <div class="h-10 w-10 rounded-lg neo flex items-center justify-center text-xl">üé®</div>
              <h3 class="font-display font-semibold text-xl">Creative Freedom</h3>
            </div>
            <p class="relative z-10 mt-3 text-[color:var(--muted)]">Experiment, innovate, and reimagine without limits.</p>
          </article>

          <article class="relative glass rounded-xl p-6 card-aura">
            <div class="relative z-10 flex items-center gap-3">
              <div class="h-10 w-10 rounded-lg neo flex items-center justify-center text-xl">ü§ù</div>
              <h3 class="font-display font-semibold text-xl">Collaboration</h3>
            </div>
            <p class="relative z-10 mt-3 text-[color:var(--muted)]">Work with some of the brightest minds worldwide.</p>
          </article>

          <article class="relative glass rounded-xl p-6 card-aura">
            <div class="relative z-10 flex items-center gap-3">
              <div class="h-10 w-10 rounded-lg neo flex items-center justify-center text-xl">üíú</div>
              <h3 class="font-display font-semibold text-xl">The Purple Spirit</h3>
            </div>
            <p class="relative z-10 mt-3 text-[color:var(--muted)]">Futurism, creativity, and inclusivity are in our DNA.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- OPEN ROLES -->
    <section id="roles" class="section">
      <div class="container-outer px-4">
        <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6">
          <div>
            <h2 class="section-title text-3xl md:text-4xl">Open Roles</h2>
            <p class="mt-3 text-[color:var(--muted)]">Find your role. Build the future.</p>
          </div>
          <div class="flex items-center gap-3">
            <button class="btn-ghost focus-ring" id="resetFilters" aria-label="Reset filters">Reset</button>
          </div>
        </div>

        <!-- Filters -->
        <div class="mt-6 glass rounded-xl p-4">
          <div class="flex flex-wrap items-center gap-3">
            <div class="flex flex-wrap gap-2" role="tablist" aria-label="Role categories" id="categoryTabs">
              <button class="btn-ghost focus-ring data-[active=true]:bg-[color:var(--card)] data-[active=true]:text-white" role="tab" aria-selected="true" data-category="All">All</button>
              <button class="btn-ghost focus-ring" role="tab" aria-selected="false" data-category="Engineering">Engineering</button>
              <button class="btn-ghost focus-ring" role="tab" aria-selected="false" data-category="AI Research">AI Research</button>
              <button class="btn-ghost focus-ring" role="tab" aria-selected="false" data-category="Design">Design</button>
              <button class="btn-ghost focus-ring" role="tab" aria-selected="false" data-category="Security">Security</button>
              <button class="btn-ghost focus-ring" role="tab" aria-selected="false" data-category="Operations">Operations</button>
              <button class="btn-ghost focus-ring" role="tab" aria-selected="false" data-category="Internships">Internships</button>
            </div>
            <div class="grow"></div>
            <div class="flex flex-wrap items-center gap-2">
              <label for="search" class="sr-only">Search</label>
              <input id="search" type="search" placeholder="Search roles..." class="focus-ring bg-transparent border border-[color:var(--border)] rounded-lg px-3 py-2 w-48 sm:w-64" />
              <label for="location" class="sr-only">Location</label>
              <select id="location" class="focus-ring bg-transparent border border-[color:var(--border)] rounded-lg px-3 py-2">
                <option value="Any">Any Location</option>
                <option>Remote</option>
                <option>Hybrid</option>
                <option>Onsite</option>
              </select>
              <label for="sort" class="sr-only">Sort</label>
              <select id="sort" class="focus-ring bg-transparent border border-[color:var(--border)] rounded-lg px-3 py-2">
                <option value="Newest">Newest</option>
                <option value="Popular">Popular</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Roles Grid -->
        <div id="rolesGrid" class="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" aria-live="polite"></div>

        <!-- No results -->
        <div id="noResults" class="hidden mt-10 text-center text-[color:var(--muted)]">
          No roles found. Try adjusting filters.
        </div>
      </div>
    </section>

    <!-- LIFE AT SALMAR -->
    <section id="life" class="section">
      <div class="container-outer px-4">
        <div class="max-w-3xl">
          <h2 class="section-title text-3xl md:text-4xl">Life at Salmar</h2>
          <p class="mt-3 text-[color:var(--muted)]">Where creativity meets craft. Where purple meets purpose.</p>
        </div>

        <!-- Carousel -->
        <div class="mt-8 glass rounded-2xl p-4">
          <div class="swiper mySwiper">
            <div class="swiper-wrapper">
              <!-- Slides with procedurally-styled panels (no external images) -->
              <div class="swiper-slide">
                <div class="h-64 md:h-80 rounded-xl neo relative overflow-hidden flex items-end p-6"
                     style="background: radial-gradient(600px 200px at 20% 10%, rgba(157,78,221,.35), transparent 60%), linear-gradient(135deg, rgba(106,0,244,.35), rgba(0,0,0,.3));">
                  <div class="absolute inset-0 opacity-30" style="background:
                    radial-gradient(200px 200px at 70% 30%, rgba(77,208,225,.35), transparent 60%),
                    radial-gradient(260px 260px at 30% 70%, rgba(181,23,158,.25), transparent 60%);"></div>
                  <blockquote class="relative z-10 max-w-xl">
                    <p class="text-lg md:text-xl">‚ÄúSalmar isn‚Äôt just a job. It‚Äôs building the future.‚Äù</p>
                    <footer class="text-sm text-[color:var(--muted)] mt-2">‚Äî Product Designer</footer>
                  </blockquote>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="h-64 md:h-80 rounded-xl neo relative overflow-hidden flex items-end p-6"
                     style="background: radial-gradient(480px 180px at 80% 20%, rgba(106,0,244,.32), transparent 60%), linear-gradient(135deg, rgba(0,0,0,.25), rgba(157,78,221,.28));">
                  <blockquote class="relative z-10 max-w-xl">
                    <p class="text-lg md:text-xl">‚ÄúThe freedom to innovate here is unlike anywhere else.‚Äù</p>
                    <footer class="text-sm text-[color:var(--muted)] mt-2">‚Äî ML Engineer</footer>
                  </blockquote>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="h-64 md:h-80 rounded-xl neo relative overflow-hidden flex items-end p-6"
                     style="background: radial-gradient(520px 200px at 30% 20%, rgba(77,208,225,.3), transparent 60%), linear-gradient(135deg, rgba(0,0,0,.25), rgba(181,23,158,.28));">
                  <blockquote class="relative z-10 max-w-xl">
                    <p class="text-lg md:text-xl">‚ÄúWe move fast, but never break trust.‚Äù</p>
                    <footer class="text-sm text-[color:var(--muted)] mt-2">‚Äî Security Lead</footer>
                  </blockquote>
                </div>
              </div>
            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-prev" aria-label="Previous"></div>
            <div class="swiper-button-next" aria-label="Next"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- APPLICATION PROCESS -->
    <section id="process" class="section">
      <div class="container-outer px-4">
        <div class="max-w-3xl">
          <h2 class="section-title text-3xl md:text-4xl">Application Process</h2>
          <p class="mt-3 text-[color:var(--muted)]">Transparent, simple, human-centric ‚Äî with a little help from Salmar AI.</p>
        </div>

        <ol class="mt-10 space-y-6 timeline">
          <li class="relative pl-10">
            <div class="absolute left-2 top-1.5 h-4 w-4 rounded-full neo border border-[color:var(--border)]"></div>
            <div class="glass rounded-lg p-4">
              <h3 class="font-semibold">Apply Online</h3>
              <p class="text-[color:var(--muted)] text-sm">Tell us about you and your goals.</p>
            </div>
          </li>
          <li class="relative pl-10">
            <div class="absolute left-2 top-1.5 h-4 w-4 rounded-full neo border border-[color:var(--border)]"></div>
            <div class="glass rounded-lg p-4">
              <h3 class="font-semibold">Meet Salmar AI</h3>
              <p class="text-[color:var(--muted)] text-sm">A smart, privacy-preserving Q&A to understand your fit.</p>
            </div>
          </li>
          <li class="relative pl-10">
            <div class="absolute left-2 top-1.5 h-4 w-4 rounded-full neo border border-[color:var(--border)]"></div>
            <div class="glass rounded-lg p-4">
              <h3 class="font-semibold">Team Interviews</h3>
              <p class="text-[color:var(--muted)] text-sm">Collaborative conversations, not gotchas.</p>
            </div>
          </li>
          <li class="relative pl-10">
            <div class="absolute left-2 top-1.5 h-4 w-4 rounded-full neo border border-[color:var(--border)]"></div>
            <div class="glass rounded-lg p-4">
              <h3 class="font-semibold">Join the Purple Future</h3>
              <p class="text-[color:var(--muted)] text-sm">Welcome to Salmar ‚Äî let‚Äôs build the next digital universe.</p>
            </div>
          </li>
        </ol>
      </div>
    </section>

    <!-- INTERACTIVE CAREER MAP -->
    <section id="map" class="section">
      <div class="container-outer px-4">
        <div class="max-w-3xl">
          <h2 class="section-title text-3xl md:text-4xl">Interactive Career Map</h2>
          <p class="mt-3 text-[color:var(--muted)]">Explore teams and roles across our constellation. Click a node to filter openings.</p>
        </div>

        <div class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6 items-start">
          <div class="lg:col-span-2 glass rounded-xl p-3">
            <div class="relative h-80 md:h-96 rounded-lg overflow-hidden">
              <canvas id="careerMap" class="absolute inset-0 w-full h-full" aria-label="3D constellation map" role="img"></canvas>
              <div id="mapTooltip" role="dialog" aria-live="polite" class="pointer-events-none absolute left-0 top-0 opacity-0 transition-opacity duration-150">
                <div class="glass rounded-lg px-3 py-2 text-sm shadow-lg border border-[color:var(--border)]">
                  <div id="mapTooltipTitle" class="font-semibold"></div>
                  <div id="mapTooltipBody" class="text-[color:var(--muted)]"></div>
                </div>
              </div>
            </div>
            <div class="text-xs text-[color:var(--muted)] px-2 py-2">Tip: Rotate with drag, zoom with wheel/touch, click a team to filter.</div>
          </div>
          <div class="glass rounded-xl p-4">
            <h3 class="font-display font-semibold text-lg">Teams</h3>
            <div id="teamsList" class="mt-3 flex flex-wrap">
              <!-- Filled by JS -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA FOOTER -->
    <section id="ctaPanel" class="section">
      <div class="container-outer px-4">
        <div class="neo rounded-2xl p-8 md:p-12 flex flex-col md:flex-row items-center justify-between gap-6">
          <div>
            <h2 class="headline text-2xl md:text-3xl font-extrabold">Your Future is Purple. Your Future is Salmar.</h2>
            <p class="mt-2 text-[color:var(--muted)]">Let‚Äôs shape the next digital universe ‚Äî together.</p>
          </div>
          <div class="flex items-center gap-3">
            <a href="#roles" class="btn-primary ripple-host" data-ripple>Start Your Journey ‚Üí</a>
            <button id="openApply" class="btn-ghost focus-ring">Quick Apply</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="py-10 border-t border-[color:var(--border)]">
    <div class="container-outer px-4 text-sm text-[color:var(--muted)] flex flex-col md:flex-row items-center justify-between gap-4">
      <div>¬© <span id="year"></span> Salmar. All rights reserved.</div>
      <div class="flex items-center gap-4">
        <a href="#" class="focus-ring underline-offset-4 hover:underline">Privacy</a>
        <a href="#" class="focus-ring underline-offset-4 hover:underline">Terms</a>
        <a href="#" class="focus-ring underline-offset-4 hover:underline">Accessibility</a>
        <button id="toTop" class="btn-ghost focus-ring">Back to top ‚Üë</button>
      </div>
    </div>
  </footer>

  <!-- MODALS -->

  <!-- Job Details Modal -->
  <div class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="jobModalTitle" id="jobModalBackdrop">
    <div class="modal p-6 md:p-8">
      <div class="flex items-start justify-between gap-4">
        <div>
          <h3 id="jobModalTitle" class="headline text-xl md:text-2xl font-bold"></h3>
          <div id="jobModalMeta" class="mt-1 text-sm text-[color:var(--muted)]"></div>
        </div>
        <button class="btn-ghost focus-ring" id="closeJobModal" aria-label="Close modal">‚úï</button>
      </div>
      <div class="mt-5 grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="md:col-span-2">
          <h4 class="font-semibold">About the role</h4>
          <p id="jobModalDesc" class="mt-2"></p>
          <div class="mt-5">
            <h4 class="font-semibold">Responsibilities</h4>
            <ul id="jobModalResp" class="list-disc pl-6 mt-2 space-y-1"></ul>
          </div>
          <div class="mt-5">
            <h4 class="font-semibold">Requirements</h4>
            <ul id="jobModalReq" class="list-disc pl-6 mt-2 space-y-1"></ul>
          </div>
        </div>
        <aside class="md:col-span-1 glass rounded-lg p-4">
          <h4 class="font-semibold">Benefits</h4>
          <ul id="jobModalBenefits" class="list-disc pl-6 mt-2 space-y-1 text-sm"></ul>
          <div class="mt-5 flex flex-col gap-3">
            <a id="jobApplyLink" href="#" class="btn-primary ripple-host" data-ripple>Apply Now ‚Üí</a>
            <button id="biometricApply" class="btn-ghost focus-ring">Biometric Quick Apply</button>
            <div id="biometricStatus" class="text-xs text-[color:var(--muted)]"></div>
          </div>
        </aside>
      </div>
    </div>
  </div>

  <!-- AI Job Match Modal -->
  <div class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="matchTitle" id="matchBackdrop">
    <form class="modal p-6 md:p-8 max-w-3xl" id="matchForm">
      <div class="flex items-start justify-between">
        <h3 id="matchTitle" class="headline text-xl md:text-2xl font-bold">AI-Powered Job Match</h3>
        <button type="button" class="btn-ghost focus-ring" id="closeMatch" aria-label="Close">‚úï</button>
      </div>
      <p class="text-[color:var(--muted)] mt-1">Answer a few quick questions ‚Äî we‚Äôll suggest your best-fit roles.</p>

      <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-5">
        <div class="glass rounded-lg p-4">
          <label class="font-semibold">Primary Focus</label>
          <div class="mt-3 space-y-2">
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="focus" value="Engineering" required class="focus-ring"> <span>Engineering</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="focus" value="AI Research" class="focus-ring"> <span>AI Research</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="focus" value="Design" class="focus-ring"> <span>Design</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="focus" value="Security" class="focus-ring"> <span>Security</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="focus" value="Operations" class="focus-ring"> <span>Operations</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="radio" name="focus" value="Internships" class="focus-ring"> <span>Internships</span>
            </label>
          </div>
        </div>

        <div class="glass rounded-lg p-4">
          <label class="font-semibold">Preferred Location</label>
          <div class="mt-3 space-y-2">
            <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="loc" value="Remote" required class="focus-ring"> Remote</label>
            <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="loc" value="Hybrid" class="focus-ring"> Hybrid</label>
            <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="loc" value="Onsite" class="focus-ring"> Onsite</label>
            <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="loc" value="Any" class="focus-ring"> Any</label>
          </div>
        </div>

        <div class="glass rounded-lg p-4">
          <label class="font-semibold">Experience Level</label>
          <div class="mt-3 space-y-2">
            <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="level" value="Intern/Junior" required class="focus-ring"> Intern/Junior</label>
            <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="level" value="Mid" class="focus-ring"> Mid</label>
            <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="level" value="Senior" class="focus-ring"> Senior</label>
            <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="level" value="Lead/Principal" class="focus-ring"> Lead/Principal</label>
          </div>
        </div>

        <div class="glass rounded-lg p-4">
          <label class="font-semibold">Impact Areas</label>
          <div class="mt-3 grid grid-cols-2 gap-2">
            <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="impact" value="Safety" class="focus-ring"> Safety</label>
            <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="impact" value="Scale" class="focus-ring"> Scale</label>
            <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="impact" value="Privacy" class="focus-ring"> Privacy</label>
            <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="impact" value="UX" class="focus-ring"> UX</label>
            <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="impact" value="Research" class="focus-ring"> Research</label>
            <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" name="impact" value="Infra" class="focus-ring"> Infra</label>
          </div>
        </div>
      </div>

      <div class="mt-6 flex items-center gap-3">
        <button class="btn-primary ripple-host" data-ripple type="submit">Get Matches</button>
        <button type="button" class="btn-ghost focus-ring" id="applyMatchFilters">Apply to grid</button>
      </div>

      <div id="matchResults" class="mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" aria-live="polite"></div>
    </form>
  </div>

  <!-- Quick Apply Modal (Biometric demo entry) -->
  <div class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="applyTitle" id="applyBackdrop">
    <div class="modal p-6 md:p-8 max-w-xl">
      <div class="flex items-start justify-between">
        <h3 id="applyTitle" class="headline text-xl md:text-2xl font-bold">Quick Apply</h3>
        <button type="button" class="btn-ghost focus-ring" id="closeApply" aria-label="Close">‚úï</button>
      </div>
      <p class="text-[color:var(--muted)] mt-1">If supported on your device, you can try a biometric prompt. This demo performs no data storage.</p>
      <div class="mt-6 flex items-center gap-3">
        <button id="globalBiometric" class="btn-primary ripple-host" data-ripple>Try Biometric</button>
        <a href="#roles" class="btn-ghost focus-ring">Go to roles ‚Üí</a>
      </div>
      <div id="globalBiometricStatus" class="text-xs text-[color:var(--muted)] mt-3"></div>
    </div>
  </div>

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
  <script src="https://unpkg.com/three@0.160.1/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.160.1/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>

  <script>
    // Utility: Safe feature detection wrapper
    const safe = (fn, fallback) => {
      try { return fn(); } catch(e) { return fallback; }
    };

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Theme toggle (no localStorage; in-memory only with try/catch if ever used)
    (function themeToggle(){
      const html = document.documentElement;
      const btn = document.getElementById('modeToggle');
      const setLabel = () => {
        const isLight = html.getAttribute('data-theme') === 'light';
        btn.setAttribute('aria-pressed', String(isLight));
        btn.innerHTML = isLight ? '‚òÄÔ∏è <span class="hidden sm:inline">Light</span>' : 'üåô <span class="hidden sm:inline">Neon</span>';
      };
      btn.addEventListener('click', () => {
        const now = html.getAttribute('data-theme') === 'neon' ? 'light' : 'neon';
        html.setAttribute('data-theme', now);
        setLabel();
      });
      setLabel();
    })();

    // Ripple effect
    document.addEventListener('click', (e) => {
      const host = e.target.closest('[data-ripple]');
      if (!host) return;
      const rect = host.getBoundingClientRect();
      const ripple = document.createElement('span');
      ripple.className = 'ripple';
      ripple.style.left = (e.clientX - rect.left - 100) + 'px';
      ripple.style.top = (e.clientY - rect.top - 100) + 'px';
      host.appendChild(ripple);
      setTimeout(() => ripple.remove(), 600);
    }, { passive: true });

    // Card aura pointer position
    document.addEventListener('mousemove', (e)=>{
      document.querySelectorAll('.card-aura').forEach(card => {
        const r = card.getBoundingClientRect();
        const mx = e.clientX - r.left; const my = e.clientY - r.top;
        card.style.setProperty('--mx', mx + 'px');
        card.style.setProperty('--my', my + 'px');
      });
    }, { passive: true });

    // Swiper
    new Swiper('.mySwiper', {
      slidesPerView: 1,
      spaceBetween: 16,
      pagination: { el: '.swiper-pagination', clickable: true },
      navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
      breakpoints: { 768: { slidesPerView: 1 }, 1024: { slidesPerView: 1 } },
      autoplay: { delay: 5500, disableOnInteraction: false },
      loop: true
    });

    // Tippy tooltips (for any element with data-tippy)
    safe(() => tippy('[data-tippy]', { theme: 'light', delay: [100, 50], animation: 'shift-away-subtle' }));

    // GSAP scroll animations
    gsap.registerPlugin(ScrollTrigger);
    gsap.utils.toArray('section').forEach((sec, i) => {
      gsap.fromTo(sec, { opacity: 0, y: 24 }, {
        opacity: 1, y: 0, duration: 0.8, ease: 'power2.out',
        scrollTrigger: { trigger: sec, start: 'top 80%' }
      });
    });

    // Back to top
    document.getElementById('toTop').addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

    // HERO: Three.js Galaxy Background
    (function galaxyScene(){
      const canvas = document.getElementById('galaxy');
      if (!canvas) return;
      const hasMotion = !window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      let renderer, scene, camera, stars, frame;
      function init() {
        renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        resize();

        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(60, canvas.clientWidth / canvas.clientHeight, 0.1, 2000);
        camera.position.set(0, 0, 120);

        // Stars
        const starGeo = new THREE.BufferGeometry();
        const starCount = 1800;
        const positions = new Float32Array(starCount * 3);
        for (let i = 0; i < starCount; i++) {
          positions[i*3+0] = (Math.random() - 0.5) * 800;
          positions[i*3+1] = (Math.random() - 0.5) * 800;
          positions[i*3+2] = (Math.random() - 0.5) * 800;
        }
        starGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        const starMat = new THREE.PointsMaterial({ color: 0xBFA9FF, size: 1.3, sizeAttenuation: true, transparent: true, opacity: 0.75 });
        stars = new THREE.Points(starGeo, starMat);
        scene.add(stars);

        // Light haze gradient plane
        const planeGeo = new THREE.PlaneGeometry(2000, 2000);
        const planeMat = new THREE.MeshBasicMaterial({ color: 0x120a24, transparent: true, opacity: 0.45 });
        const plane = new THREE.Mesh(planeGeo, planeMat);
        plane.position.set(0,0,-300);
        scene.add(plane);

        animate();
      }

      function animate() {
        frame = requestAnimationFrame(animate);
        if (stars && hasMotion) {
          stars.rotation.y += 0.0006;
          stars.rotation.x += 0.0003;
        }
        renderer.render(scene, camera);
      }

      function resize() {
        const w = canvas.clientWidth;
        const h = canvas.clientHeight;
        renderer?.setSize(w, h, false);
        if (camera) {
          camera.aspect = w / h;
          camera.updateProjectionMatrix();
        }
      }

      init();
      window.addEventListener('resize', resize);

      document.addEventListener('visibilitychange', () => {
        if (document.hidden) cancelAnimationFrame(frame);
        else animate();
      });
    })();

    // HERO: Holographic Orb
    (function orbScene(){
      const canvas = document.getElementById('orb');
      if (!canvas) return;
      const hasMotion = !window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      let renderer, scene, camera, orb, glow, frame, pointer = new THREE.Vector2(0,0);

      function init() {
        renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        resize();

        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(45, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
        camera.position.set(0, 0, 6);

        const light1 = new THREE.PointLight(0x9d4edd, 2.2, 50);
        light1.position.set(4, 2, 6);
        const light2 = new THREE.PointLight(0x4dd0e1, 2.2, 50);
        light2.position.set(-4, -2, 6);
        const amb = new THREE.AmbientLight(0xffffff, 0.18);
        scene.add(light1, light2, amb);

        const geo = new THREE.SphereGeometry(1.6, 64, 64);
        const mat = new THREE.MeshPhysicalMaterial({
          color: 0x6a00f4,
          metalness: 0.2, roughness: 0.2, clearcoat: 1, clearcoatRoughness: 0.05,
          transmission: 0.95, thickness: 0.8, ior: 1.2, reflectivity: 1
        });
        orb = new THREE.Mesh(geo, mat);
        scene.add(orb);

        // Aura glow (sprite)
        const glowTex = createRadialTexture();
        const glowMat = new THREE.SpriteMaterial({ map: glowTex, color: 0x9d4edd, transparent: true, opacity: 0.6, depthWrite: false });
        glow = new THREE.Sprite(glowMat);
        glow.scale.set(6,6,1);
        scene.add(glow);

        canvas.addEventListener('pointermove', onPointerMove, { passive: true });
        animate();
      }

      function createRadialTexture(size = 256) {
        const cvs = document.createElement('canvas'); cvs.width = cvs.height = size;
        const ctx = cvs.getContext('2d');
        const g = ctx.createRadialGradient(size/2, size/2, 0, size/2, size/2, size/2);
        g.addColorStop(0, 'rgba(157,78,221,0.55)');
        g.addColorStop(0.4, 'rgba(106,0,244,0.35)');
        g.addColorStop(1, 'rgba(0,0,0,0)');
        ctx.fillStyle = g; ctx.fillRect(0,0,size,size);
        return new THREE.CanvasTexture(cvs);
      }

      function onPointerMove(e) {
        const rect = canvas.getBoundingClientRect();
        pointer.x = ((e.clientX - rect.left) / rect.width) * 2 - 1;
        pointer.y = -((e.clientY - rect.top) / rect.height) * 2 + 1;
      }

      function animate() {
        frame = requestAnimationFrame(animate);
        if (hasMotion) {
          orb.rotation.y += 0.004;
          orb.rotation.x += 0.002;
        }
        // Follow pointer slightly
        orb.position.x = pointer.x * 0.2;
        orb.position.y = pointer.y * 0.2;
        glow.position.copy(orb.position);

        // Intensify with scroll
        const scrollY = window.scrollY || window.pageYOffset;
        const intensity = Math.min(1.2, 0.4 + scrollY / 1000);
        glow.material.opacity = 0.45 + intensity * 0.3;

        renderer.render(scene, camera);
      }

      function resize() {
        const w = canvas.clientWidth;
        const h = canvas.clientHeight;
        renderer?.setSize(w, h, false);
        if (camera) {
          camera.aspect = w / h;
          camera.updateProjectionMatrix();
        }
      }

      init();
      window.addEventListener('resize', resize);
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) cancelAnimationFrame(frame);
        else animate();
      });
    })();

    // OPEN ROLES DATA
    const ROLES = [
      // Engineering
      { id: 1, title: 'Senior Frontend Engineer', category: 'Engineering', location: 'Remote', type: 'Full-time', popular: true,
        snippet: 'Craft immersive interfaces for universal AI.',
        description: 'Design and build world-class user experiences with performance, accessibility, and craft. Collaborate closely with design and research to ship delightful features.',
        responsibilities: ['Build modular UI components','Ensure performance & accessibility','Collaborate with AI/Design teams','Write tests and documentation'],
        requirements: ['5+ years in modern frontend','Expertise in JS/TS, performance, a11y','Experience with design systems','Strong UX sensibilities'],
        benefits: ['Competitive compensation','Flexible remote work','Health, dental, vision','Generous learning stipend'],
        apply: '#apply-senior-frontend'
      },
      { id: 2, title: 'Platform Engineer', category: 'Engineering', location: 'Hybrid', type: 'Full-time', popular: false,
        snippet: 'Scale and secure our platform for billions.',
        description: 'Own core infra building blocks in a highly available environment. Ship secure, observable, and efficient services.',
        responsibilities: ['Design cloud architectures','Implement SRE practices','Automate everything','Harden security by default'],
        requirements: ['4+ years platform/SRE','K8s, cloud, IaC','Security best practices','Observability'],
        benefits: ['Competitive compensation','Remote-friendly','Wellness support','Retirement plan'],
        apply: '#apply-platform'
      },
      { id: 3, title: 'Full Stack Engineer', category: 'Engineering', location: 'Onsite', type: 'Full-time', popular: true,
        snippet: 'Ship end-to-end features across the stack.',
        description: 'Work across frontend, backend, and AI services to deliver user-facing magic.',
        responsibilities: ['Build APIs & UIs','Collaborate with AI research','Own features end-to-end','Improve developer experience'],
        requirements: ['3+ years full stack','Node, API design, databases','Solid frontend skills','Testing discipline'],
        benefits: ['Comp + equity','Hybrid options','Learning stipend','Parental leave'],
        apply: '#apply-fs'
      },

      // AI Research
      { id: 4, title: 'AI Research Scientist', category: 'AI Research', location: 'Remote', type: 'Full-time', popular: true,
        snippet: 'Help push the limits of what universal AI can do.',
        description: 'Lead research initiatives in foundation models, alignment, and multi-modal reasoning.',
        responsibilities: ['Design and evaluate novel architectures','Publish and present findings','Collaborate with engineering teams','Drive model efficiency and safety'],
        requirements: ['PhD or equivalent experience','Strong publication record','Deep learning mastery','Responsible AI mindset'],
        benefits: ['Top-tier research resources','Conference travel','Equity','Flexible work'],
        apply: '#apply-research-sci'
      },
      { id: 5, title: 'Applied ML Engineer', category: 'AI Research', location: 'Hybrid', type: 'Full-time', popular: false,
        snippet: 'Bridge cutting-edge research to product.',
        description: 'Productionize research, develop pipelines, optimize latency, and measure impact.',
        responsibilities: ['Deploy models to prod','Optimize inference','Monitor and iterate','Collaborate with product'],
        requirements: ['3+ years ML eng','Python, CUDA, inference stacks','Data pipelines','Experimentation'],
        benefits: ['Competitive compensation','Health benefits','Wellness support','Remote-friendly'],
        apply: '#apply-applied-ml'
      },
      { id: 6, title: 'AI Safety Researcher', category: 'AI Research', location: 'Remote', type: 'Full-time', popular: false,
        snippet: 'Advance safety, robustness, and alignment.',
        description: 'Develop methods to ensure safe, trustworthy AI behavior at scale.',
        responsibilities: ['Red teaming & evals','Alignment techniques','Risk assessment','Policy collaboration'],
        requirements: ['Safety research background','Evaluation frameworks','Ethics & policy awareness','Cross-functional communication'],
        benefits: ['Impactful mission','Flexible working','Conference travel','Equity program'],
        apply: '#apply-ai-safety'
      },

      // Design
      { id: 7, title: 'Product Designer', category: 'Design', location: 'Remote', type: 'Full-time', popular: true,
        snippet: 'Design intuitive, inspiring experiences.',
        description: 'Own product areas across research, prototyping, and high-fidelity design. Partner deeply with engineering.',
        responsibilities: ['Design system evolution','Prototypes and flows','User research','Accessibility by design'],
        requirements: ['4+ years product design','Design systems & prototyping','Strong portfolio','A11y knowledge'],
        benefits: ['Creative environment','Remote-friendly','Learning stipend','Health coverage'],
        apply: '#apply-product-designer'
      },
      { id: 8, title: 'Brand Designer', category: 'Design', location: 'Hybrid', type: 'Full-time', popular: false,
        snippet: 'Evolve the purple identity of Salmar.',
        description: 'Shape a brand that feels futuristic, human, and trustworthy.',
        responsibilities: ['Brand systems','Motion & visual language','Cross-channel assets','Guidelines'],
        requirements: ['3+ years brand','Motion/visual chops','Systems thinker','Collaboration'],
        benefits: ['Great team','Creative budget','Equity','Flexible PTO'],
        apply: '#apply-brand-designer'
      },

      // Security
      { id: 9, title: 'Security Engineer (AppSec)', category: 'Security', location: 'Remote', type: 'Full-time', popular: true,
        snippet: 'Build with trust, privacy, and safety at the core.',
        description: 'Secure product and infra; champion SDLC security and threat modeling.',
        responsibilities: ['Secure SDLC','Threat models','Code reviews','Security tooling'],
        requirements: ['4+ years AppSec','Threat modeling','SAST/DAST','Strong communicator'],
        benefits: ['Mission impact','Remote','Learning stipend','Health/retirement'],
        apply: '#apply-appsec'
      },
      { id: 10, title: 'Privacy Engineer', category: 'Security', location: 'Hybrid', type: 'Full-time', popular: false,
        snippet: 'Architect privacy-preserving systems.',
        description: 'Data minimization, differential privacy, and policy-by-design.',
        responsibilities: ['Privacy reviews','Data governance','Tech guidance','Policy collaboration'],
        requirements: ['Privacy eng background','DP knowledge','Infra familiarity','Cross-functional'],
        benefits: ['Impact','Hybrid options','Conference budget','Equity'],
        apply: '#apply-privacy'
      },

      // Operations
      { id: 11, title: 'Technical Program Manager', category: 'Operations', location: 'Hybrid', type: 'Full-time', popular: false,
        snippet: 'Drive clarity, momentum, and outcomes.',
        description: 'Lead program execution across research, engineering, and design.',
        responsibilities: ['Roadmaps & execution','Risk management','Stakeholder alignment','Retrospectives'],
        requirements: ['5+ years TPM','Strong comms','System thinker','Data-driven'],
        benefits: ['Great team','Growth','Health benefits','Flexible PTO'],
        apply: '#apply-tpm'
      },
      { id: 12, title: 'People Operations Partner', category: 'Operations', location: 'Onsite', type: 'Full-time', popular: false,
        snippet: 'Design people experiences that scale.',
        description: 'Partner with teams to create exceptional employee journeys.',
        responsibilities: ['Onboarding','Dev & feedback systems','Policies','Culture building'],
        requirements: ['3+ years People Ops','Systems mindset','Empathy & rigor','Excellent comms'],
        benefits: ['People-first culture','Learning','Benefits','Parental leave'],
        apply: '#apply-people-ops'
      },

      // Internships
      { id: 13, title: 'Research Intern (Summer)', category: 'Internships', location: 'Remote', type: 'Internship', popular: true,
        snippet: 'Work with leading AI researchers.',
        description: 'Contribute to cutting-edge projects with strong mentorship.',
        responsibilities: ['Literature review','Run experiments','Build tooling','Share results'],
        requirements: ['MS/PhD ongoing','Deep learning foundations','Python','Curiosity'],
        benefits: ['Mentorship','Flexible schedule','Stipend','Publish with us'],
        apply: '#apply-research-intern'
      },
      { id: 14, title: 'Design Intern', category: 'Internships', location: 'Hybrid', type: 'Internship', popular: false,
        snippet: 'Prototype the future of AI UX.',
        description: 'Design and test product experiences with guidance from senior designers.',
        responsibilities: ['Figma systems','Prototyping','User testing','Presentation'],
        requirements: ['Design student','Portfolio','Curiosity','A11y awareness'],
        benefits: ['Mentorship','Stipend','Hybrid','Portfolio growth'],
        apply: '#apply-design-intern'
      },
      { id: 15, title: 'Software Engineering Intern', category: 'Internships', location: 'Onsite', type: 'Internship', popular: false,
        snippet: 'Build features with real impact.',
        description: 'Pair with experienced mentors across the stack.',
        responsibilities: ['Code & tests','Design reviews','Docs','Demo days'],
        requirements: ['CS student','JS/TS/Node','Curiosity','Team player'],
        benefits: ['Mentorship','Lunch & learns','Stipend','Great team'],
        apply: '#apply-se-intern'
      },

      // Additional to reach 18+
      { id: 16, title: 'Data Engineer', category: 'Engineering', location: 'Remote', type: 'Full-time', popular: false,
        snippet: 'Design pipelines powering intelligence.',
        description: 'Build reliable, scalable data systems for model training and analytics.',
        responsibilities: ['ETL/ELT pipelines','Data quality','MLOps collaboration','Streaming'],
        requirements: ['3+ years data eng','SQL + Python','Cloud data stacks','Observability'],
        benefits: ['Growth','Remote','Benefits','Learning stipend'],
        apply: '#apply-data-eng'
      },
      { id: 17, title: 'UX Researcher', category: 'Design', location: 'Remote', type: 'Full-time', popular: false,
        snippet: 'Understand users shaping the universal AI.',
        description: 'Plan and run studies to inform product strategy.',
        responsibilities: ['Research plans','Synthesis','Workshops','Insights'],
        requirements: ['3+ years UXR','Mixed methods','Excellent comms','Storytelling'],
        benefits: ['Great team','Remote','Benefits','Learning'],
        apply: '#apply-uxr'
      },
      { id: 18, title: 'Detection & Response Engineer', category: 'Security', location: 'Remote', type: 'Full-time', popular: false,
        snippet: 'Evolve threat detection for AI-scale systems.',
        description: 'Build detections, automation, and incident response playbooks.',
        responsibilities: ['Detections','Automation','IR runbooks','Collab w/ teams'],
        requirements: ['3+ years SecOps','SIEM/SOAR','Cloud security','On-call readiness'],
        benefits: ['Impact','Remote','Benefits','Growth'],
        apply: '#apply-detection'
      }
    ];

    // Populate roles grid
    (function rolesGrid(){
      const grid = document.getElementById('rolesGrid');
      const noRes = document.getElementById('noResults');
      const tabs = document.getElementById('categoryTabs');
      const search = document.getElementById('search');
      const location = document.getElementById('location');
      const sort = document.getElementById('sort');
      const resetFilters = document.getElementById('resetFilters');

      let state = { category: 'All', query: '', location: 'Any', sort: 'Newest' };
      const fuse = new Fuse(ROLES, { keys: ['title', 'snippet', 'description', 'category'], threshold: 0.35 });

      function card(role) {
        return `
          <article class="relative glass rounded-xl p-6 flex flex-col card-aura" data-id="${role.id}">
            <div class="flex items-start justify-between gap-3">
              <div>
                <h3 class="font-display text-lg font-semibold">${role.title}</h3>
                <div class="text-sm text-[color:var(--muted)] mt-0.5">${role.category} ‚Ä¢ ${role.location} ‚Ä¢ ${role.type}</div>
              </div>
              ${role.popular ? '<span class="text-xs px-2 py-1 rounded-full" style="background: var(--card); border:1px solid var(--border)">Popular</span>' : ''}
            </div>
            <p class="mt-3 text-sm">${role.snippet}</p>
            <div class="mt-4 flex items-center gap-3">
              <button class="btn-primary ripple-host" data-ripple data-action="view" data-id="${role.id}">View Details</button>
              <a href="${role.apply}" class="btn-ghost focus-ring" data-action="apply" data-id="${role.id}">Apply Now ‚Üí</a>
            </div>
            <div class="absolute inset-0 pointer-events-none" aria-hidden="true"></div>
          </article>
        `;
      }

      function applyFilters() {
        let list = ROLES.slice();
        // Category
        if (state.category !== 'All') list = list.filter(r => r.category === state.category);
        // Location
        if (state.location !== 'Any') list = list.filter(r => r.location === state.location);
        // Search
        if (state.query.trim().length > 0) {
          list = fuse.search(state.query).map(x => x.item).filter(r => list.includes(r));
        }
        // Sort
        if (state.sort === 'Popular') list.sort((a,b) => (b.popular|0) - (a.popular|0));
        else list.sort((a,b) => b.id - a.id); // Newest by id ordering in seed

        grid.innerHTML = list.map(card).join('');
        noRes.classList.toggle('hidden', list.length > 0);
      }

      tabs.addEventListener('click', (e) => {
        const btn = e.target.closest('button[data-category]');
        if (!btn) return;
        tabs.querySelectorAll('button[data-category]').forEach(b => {
          b.dataset.active = 'false'; b.setAttribute('aria-selected','false');
        });
        btn.dataset.active = 'true'; btn.setAttribute('aria-selected','true');
        state.category = btn.dataset.category;
        applyFilters();
      });

      search.addEventListener('input', (e) => { state.query = e.target.value; applyFilters(); });
      location.addEventListener('change', (e) => { state.location = e.target.value; applyFilters(); });
      sort.addEventListener('change', (e) => { state.sort = e.target.value; applyFilters(); });
      resetFilters.addEventListener('click', () => {
        state = { category: 'All', query: '', location: 'Any', sort: 'Newest' };
        tabs.querySelectorAll('button[data-category]').forEach((b,i) => {
          b.dataset.active = (b.dataset.category === 'All') ? 'true' : 'false';
          b.setAttribute('aria-selected', b.dataset.active);
        });
        search.value = ''; location.value = 'Any'; sort.value = 'Newest';
        applyFilters();
      });

      // Open modal
      grid.addEventListener('click', (e) => {
        const viewBtn = e.target.closest('[data-action="view"]');
        if (viewBtn) {
          const id = Number(viewBtn.dataset.id);
          openJobModal(id);
        }
      });

      applyFilters();
    })();

    // Job modal controls
    function openJobModal(id) {
      const role = ROLES.find(r => r.id === id);
      if (!role) return;
      document.getElementById('jobModalTitle').textContent = role.title;
      document.getElementById('jobModalMeta').textContent = `${role.category} ‚Ä¢ ${role.location} ‚Ä¢ ${role.type}`;
      document.getElementById('jobModalDesc').textContent = role.description;
      const resp = document.getElementById('jobModalResp'); resp.innerHTML = role.responsibilities.map(li => `<li>${li}</li>`).join('');
      const req = document.getElementById('jobModalReq'); req.innerHTML = role.requirements.map(li => `<li>${li}</li>`).join('');
      const ben = document.getElementById('jobModalBenefits'); ben.innerHTML = role.benefits.map(li => `<li>${li}</li>`).join('');
      const link = document.getElementById('jobApplyLink'); link.href = role.apply;

      document.getElementById('jobModalBackdrop').dataset.open = 'true';
      document.getElementById('biometricStatus').textContent = '';
      const close = () => { document.getElementById('jobModalBackdrop').dataset.open = 'false'; };
      document.getElementById('closeJobModal').onclick = close;
      document.getElementById('jobModalBackdrop').addEventListener('click', (e) => { if (e.target.id === 'jobModalBackdrop') close(); }, { once: true });
      // Biometric quick apply (demo)
      document.getElementById('biometricApply').onclick = () => runBiometric('#biometricStatus');
    }

    // AI Job Match
    (function matchTool(){
      const openBtn = document.getElementById('openMatch');
      const backdrop = document.getElementById('matchBackdrop');
      const closeBtn = document.getElementById('closeMatch');
      const form = document.getElementById('matchForm');
      const results = document.getElementById('matchResults');
      const applyToGrid = document.getElementById('applyMatchFilters');

      const open = () => { backdrop.dataset.open = 'true'; };
      const close = () => { backdrop.dataset.open = 'false'; results.innerHTML = ''; form.reset(); };

      openBtn.addEventListener('click', open);
      closeBtn.addEventListener('click', close);
      backdrop.addEventListener('click', (e) => { if (e.target.id === 'matchBackdrop') close(); });

      function score(role, answers) {
        let s = 0;
        if (role.category === answers.focus) s += 4;
        if (answers.loc === 'Any' || role.location === answers.loc) s += 2;
        if (answers.level.includes('Senior') && /Senior|Lead|Principal/i.test(role.title)) s += 2;
        if (answers.level.includes('Intern') && /Intern/i.test(role.title)) s += 3;
        if (answers.level === 'Mid' && !/Intern|Lead|Principal/i.test(role.title)) s += 2;

        const impactMap = {
          Safety: ['Safety','Security','Privacy','Detection'],
          Scale: ['Platform','Data','Engineer','Performance','Infra'],
          Privacy: ['Privacy','Security','Data'],
          UX: ['Design','Product','UX'],
          Research: ['Research','ML'],
          Infra: ['Platform','Data','Engineer','Full Stack','Detection']
        };
        for (const i of answers.impact) {
          const words = impactMap[i] || [];
          if (words.some(w => role.title.includes(w))) s += 1.5;
        }
        if (role.popular) s += 0.5;
        return s;
      }

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const data = new FormData(form);
        const answers = {
          focus: data.get('focus'),
          loc: data.get('loc'),
          level: data.get('level'),
          impact: data.getAll('impact')
        };
        const ranked = ROLES.map(r => ({ role: r, score: score(r, answers) }))
                            .sort((a,b) => b.score - a.score)
                            .slice(0, 6);

        results.innerHTML = ranked.map(({role, score:sc}) => `
          <article class="glass rounded-lg p-4">
            <h4 class="font-semibold">${role.title}</h4>
            <div class="text-xs text-[color:var(--muted)]">${role.category} ‚Ä¢ ${role.location} ‚Ä¢ Score: ${Math.round(sc*10)/10}</div>
            <p class="text-sm mt-2">${role.snippet}</p>
            <div class="mt-3 flex items-center gap-2">
              <button class="btn-primary ripple-host" data-ripple data-view="${role.id}">View</button>
              <a href="${role.apply}" class="btn-ghost focus-ring">Apply ‚Üí</a>
            </div>
          </article>
        `).join('');

        results.querySelectorAll('[data-view]').forEach(btn => {
          btn.addEventListener('click', () => openJobModal(Number(btn.getAttribute('data-view'))));
        });
      });

      // Apply chosen filters to grid
      applyToGrid.addEventListener('click', () => {
        const data = new FormData(form);
        const focus = data.get('focus') || 'All';
        const loc = data.get('loc') || 'Any';
        document.querySelectorAll('#categoryTabs [data-category]').forEach(b => {
          b.dataset.active = (b.dataset.category === focus) ? 'true' : 'false';
          b.setAttribute('aria-selected', b.dataset.active);
        });
        document.getElementById('location').value = loc;
        // Trigger native events to refresh filter logic
        document.getElementById('location').dispatchEvent(new Event('change'));
        document.querySelector('#categoryTabs [data-category="' + (focus || 'All') + '"]')?.click();
      });
    })();

    // Quick Apply modal
    (function quickApply(){
      const open = document.getElementById('openApply');
      const back = document.getElementById('applyBackdrop');
      const close = document.getElementById('closeApply');
      open.addEventListener('click', () => back.dataset.open = 'true');
      close.addEventListener('click', () => back.dataset.open = 'false');
      back.addEventListener('click', (e) => { if (e.target.id === 'applyBackdrop') back.dataset.open = 'false'; });

      document.getElementById('globalBiometric').addEventListener('click', () => runBiometric('#globalBiometricStatus'));
    })();

    // Biometric Quick Apply (WebAuthn demo; progressive enhancement only)
    async function runBiometric(statusSelector) {
      const statusEl = document.querySelector(statusSelector);
      const supported = !!(window.PublicKeyCredential && navigator.credentials);
      if (!supported) {
        statusEl.textContent = 'Biometric not supported on this device/browser.';
        return;
      }
      statusEl.textContent = 'Requesting platform authenticator...';
      try {
        // Fake challenge and rp/user IDs for demo (no storage)
        const challenge = new Uint8Array(32); crypto.getRandomValues(challenge);
        const userId = new Uint8Array(16); crypto.getRandomValues(userId);

        const pubKey = {
          challenge,
          rp: { name: 'Salmar Careers' },
          user: { id: userId, name: 'salmar-applicant@example.com', displayName: 'Salmar Applicant' },
          pubKeyCredParams: [{ type: 'public-key', alg: -7 }, { type: 'public-key', alg: -257 }],
          authenticatorSelection: { authenticatorAttachment: 'platform', userVerification: 'preferred' },
          timeout: 60000,
          attestation: 'none'
        };
        const cred = await navigator.credentials.create({ publicKey: pubKey });
        if (cred) {
          statusEl.textContent = 'Biometric prompt completed (demo). No data stored.';
        } else {
          statusEl.textContent = 'Biometric canceled.';
        }
      } catch (err) {
        statusEl.textContent = 'Biometric error or canceled by user.';
      }
    }

    // Interactive Career Map (Three.js)
    (function careerMap(){
      const canvas = document.getElementById('careerMap');
      const tooltip = document.getElementById('mapTooltip');
      const tipTitle = document.getElementById('mapTooltipTitle');
      const tipBody = document.getElementById('mapTooltipBody');
      const teamsList = document.getElementById('teamsList');

      if (!canvas) return;

      const hasMotion = !window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      const teams = [
        { key: 'Engineering', color: 0x6a00f4, desc: 'Build and scale our platform and experiences.' },
        { key: 'AI Research', color: 0x9d4edd, desc: 'Invent the future of universal AI.' },
        { key: 'Design', color: 0x4dd0e1, desc: 'Craft interfaces and interactions for humans.' },
        { key: 'Security', color: 0xb5179e, desc: 'Protect trust, privacy, and safety.' },
        { key: 'Operations', color: 0x7c3aed, desc: 'Enable teams to thrive and deliver.' },
        { key: 'Internships', color: 0x22d3ee, desc: 'Launch your journey with impact.' },
      ];

      // Fill tags list
      teams.forEach(t => {
        const a = document.createElement('button');
        a.type = 'button';
        a.className = 'tag focus-ring';
        a.style.borderColor = 'var(--border)';
        a.innerHTML = `<span style="width:10px;height:10px;border-radius:999px;display:inline-block;background:${new THREE.Color(t.color).getStyle()}"></span> ${t.key}`;
        a.addEventListener('click', () => filterByTeam(t.key));
        teamsList.appendChild(a);
      });

      let renderer, scene, camera, controls, frame;
      const raycaster = new THREE.Raycaster();
      const pointer = new THREE.Vector2();
      const nodes = [];

      function init() {
        renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.setSize(canvas.clientWidth, canvas.clientHeight, false);

        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(55, canvas.clientWidth / canvas.clientHeight, 0.1, 2000);
        camera.position.set(0, 0, 40);

        controls = new THREE.OrbitControls(camera, canvas);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.enablePan = false;

        // Constellation nodes
        const radius = 18;
        teams.forEach((t, i) => {
          const angle = (i / teams.length) * Math.PI * 2;
          const x = Math.cos(angle) * radius * (i % 2 ? 1 : 0.8);
          const y = Math.sin(angle) * radius * (i % 2 ? 0.8 : 1);
          const geo = new THREE.SphereGeometry(2.0, 32, 32);
          const mat = new THREE.MeshStandardMaterial({ color: t.color, emissive: t.color, emissiveIntensity: 0.35, roughness: 0.3, metalness: 0.2 });
          const mesh = new THREE.Mesh(geo, mat);
          mesh.position.set(x, y, (Math.random() - 0.5) * 2);
          mesh.userData = { team: t.key, desc: t.desc };
          nodes.push(mesh); scene.add(mesh);
        });

        // Connecting lines
        const lineMat = new THREE.LineBasicMaterial({ color: 0x6a00f4, transparent: true, opacity: 0.25 });
        for (let i=0; i<nodes.length; i++){
          for (let j=i+1; j<nodes.length; j++){
            if (Math.random() > 0.6) continue;
            const pts = new THREE.BufferGeometry().setFromPoints([nodes[i].position, nodes[j].position]);
            const line = new THREE.Line(pts, lineMat);
            scene.add(line);
          }
        }

        const keyLight = new THREE.PointLight(0xffffff, 1.0, 100); keyLight.position.set(10, 10, 25); scene.add(keyLight);
        const fillLight = new THREE.PointLight(0x9d4edd, 0.6, 60); fillLight.position.set(-10, -8, 20); scene.add(fillLight);

        animate();
      }

      function animate() {
        frame = requestAnimationFrame(animate);
        if (hasMotion) nodes.forEach((n, i) => { n.rotation.y += 0.005; n.rotation.x += 0.002; });
        controls.update();
        renderer.render(scene, camera);
      }

      function resize() {
        const w = canvas.clientWidth, h = canvas.clientHeight;
        renderer.setSize(w, h, false);
        camera.aspect = w / h; camera.updateProjectionMatrix();
      }

      function onPointerMove(e) {
        const rect = canvas.getBoundingClientRect();
        pointer.x = ((e.clientX - rect.left) / rect.width) * 2 - 1;
        pointer.y = -((e.clientY - rect.top) / rect.height) * 2 + 1;

        raycaster.setFromCamera(pointer, camera);
        const hits = raycaster.intersectObjects(nodes);
        canvas.style.cursor = hits.length ? 'pointer' : 'grab';
        if (hits.length) {
          const hit = hits[0].object;
          tipTitle.textContent = hit.userData.team;
          tipBody.textContent = hit.userData.desc;
          tooltip.style.transform = `translate(${e.clientX - rect.left + 12}px, ${e.clientY - rect.top + 12}px)`;
          tooltip.style.opacity = 1;
        } else {
          tooltip.style.opacity = 0;
        }
      }

      function onClick(e) {
        const rect = canvas.getBoundingClientRect();
        pointer.x = ((e.clientX - rect.left) / rect.width) * 2 - 1;
        pointer.y = -((e.clientY - rect.top) / rect.height) * 2 + 1;
        raycaster.setFromCamera(pointer, camera);
        const hits = raycaster.intersectObjects(nodes);
        if (hits.length) {
          const team = hits[0].object.userData.team;
          filterByTeam(team);
        }
      }

      function filterByTeam(team) {
        // Activate tab to filter roles
        const btn = document.querySelector(`#categoryTabs [data-category="${CSS.escape(team)}"]`);
        if (btn) btn.click();
        // Scroll to roles
        document.getElementById('roles').scrollIntoView({ behavior: 'smooth' });
      }

      init();
      window.addEventListener('resize', resize);
      canvas.addEventListener('pointermove', onPointerMove, { passive: true });
      canvas.addEventListener('click', onClick);
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) cancelAnimationFrame(frame); else animate();
      });
    })();

    // Accessibility: focus trap for modals
    (function modalFocusTraps(){
      const backdrops = ['jobModalBackdrop','matchBackdrop','applyBackdrop'].map(id => document.getElementById(id));
      backdrops.forEach(backdrop => {
        backdrop?.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            backdrop.dataset.open = 'false';
          }
          if (e.key !== 'Tab') return;
          const focusables = backdrop.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
          if (!focusables.length) return;
          const first = focusables[0], last = focusables[focusables.length - 1];
          if (e.shiftKey && document.activeElement === first) { last.focus(); e.preventDefault(); }
          else if (!e.shiftKey && document.activeElement === last) { first.focus(); e.preventDefault(); }
        });
      });
    })();

    // Animate timeline glow progress
    (function timelineGlow(){
      const steps = document.querySelectorAll('#process li .glass');
      steps.forEach((step, i) => {
        gsap.fromTo(step, { boxShadow: '0 0 0 rgba(0,0,0,0)', y: 18, opacity: 0 },
          { boxShadow: '0 0 24px rgba(157,78,221,0.3)', y: 0, opacity: 1, duration: 0.8, delay: i * 0.1,
            scrollTrigger: { trigger: step, start: 'top 80%' }});
      });
    })();

    // Floating particle aura on hover (soft performance footprint)
    (function softParticles(){
      const hostSelector = '#rolesGrid article';
      const handler = (e, on) => {
        const card = e.target.closest('article');
        if (!card) return;
        if (on) card.style.boxShadow = '0 0 24px rgba(157,78,221,0.25)';
        else card.style.boxShadow = '';
      };
      document.addEventListener('pointerenter', (e) => { if (e.target.closest(hostSelector)) handler(e, true); }, true);
      document.addEventListener('pointerleave', (e) => { if (e.target.closest(hostSelector)) handler(e, false); }, true);
    })();
  </script>
</body>
</html>